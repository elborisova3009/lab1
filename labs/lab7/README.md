### Лабораторная работа 7. Развертывание коммутируемой сети с резервными каналами

#### Топология 
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20114403.jpg)

#### Таблица адресации
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20114706-1.jpg)

#### Цели
Часть 1. Создание сети и настройка основных параметров устройства  
Часть 2. Выбор корневого моста  
Часть 3. Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов  
Часть 4. Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета портов  

#### Часть 1:	Создание сети и настройка основных параметров устройства

Шаг 1:	Создайте сеть согласно топологии.







Шаг 2:	Выполнение инициализации и перезагрузки коммутаторов в CPT не требуется.

Шаг 3:	Настрою базовые параметры каждого коммутатора. Для примера S1:  
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20125135.jpg)  
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20125932.jpg)  
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20125951.jpg)

S1 show run:  
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20130211.jpg)  
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20130227.jpg)

Аналогично для S2 и S3.  
S2 show run:   
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20131627.jpg)  
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20131639.jpg)  
S3 show run:      
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20141520.jpg)   
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20141532.jpg)

Шаг 4:	Проверю связь.  
Нет пингов.

Дополню конфигурационные файлы настройкой куммутационных портов, определю все интерфейсы во VLAN 88.

Успешно ли выполняется эхо-запрос от коммутатора S1 на коммутатор S2? *Да.*  

Успешно ли выполняется эхо-запрос от коммутатора S1 на коммутатор S3? *Да.*  
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20144526.jpg)  


Успешно ли выполняется эхо-запрос от коммутатора S2 на коммутатор S3?	*Да.*    
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20145150.jpg)  

#### Часть 2:	Определение корневого моста  
Для каждого экземпляра протокола spanning-tree (коммутируемая сеть LAN или широковещательный домен) существует коммутатор, выделенный в качестве корневого моста. Корневой мост служит точкой привязки для всех расчётов протокола spanning-tree, позволяя определить избыточные пути, которые следует заблокировать.  
Процесс выбора определяет, какой из коммутаторов станет корневым мостом. Коммутатор с наименьшим значением идентификатора моста (BID) становится корневым мостом. Идентификатор BID состоит из значения приоритета моста, расширенного идентификатора системы и MAC-адреса коммутатора. Значение приоритета может находиться в диапазоне от 0 до 65535 с шагом 4096. По умолчанию используется значение 32768.  

Шаг 1:	Отключите все порты на коммутаторах.  
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20150145-1.jpg)  

Аналогично для S1 и S3. 

![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20150348.jpg)

Шаг 2:	Настройте подключенные порты в качестве транковых.
Шаг 3:	Включите порты F0/2 и F0/4 на всех коммутаторах.

![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20154046.jpg)  

Аналогично для S1 и S2. 

Шаг 4:	Отобразите данные протокола spanning-tree.

S1:  
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20160134.jpg)  
S2:  
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20160145.jpg)  
S3:  
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20160159.jpg)

Приоритет идентификатора моста рассчитывается путем сложения значений приоритета и расширенного идентификатора системы.  
Расширенным идентификатором системы всегда является номер сети VLAN. В примере ниже все три коммутатора имеют равные значения приоритета идентификатора моста (32856 = 32768 + 88, где приоритет по умолчанию = 32768, номер сети VLAN = 88).  
Следовательно, коммутатор с самым низким значением MAC-адреса становится корневым мостом.  
В данной работе — это S2:  
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2021-10-2022%20161846.jpg)  

Заполню схему, запишу роли (Role) и состояния (Sts) портов на каждом коммутаторе в топологии.  
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2024-10-2022%20163928.jpg)  

С учетом выходных данных, поступающих с коммутаторов, ответьте на следующие вопросы.
Какой коммутатор является корневым мостом? *S2*   
![alt text](https://github.com/elborisova3009/otus-networks/blob/master/labs/lab7/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%2024-10-2022%20164447.jpg)  

Почему этот коммутатор был выбран протоколом spanning-tree в качестве корневого моста?
*Все три коммутатора имеют равные значения приоритета идентификатора моста = 32856, но у S2 самое низкое значение MAC-адреса = 000A.419D.EB67.  
Поэтому, он становится корневым мостом.*   

Какие порты на коммутаторе являются корневыми портами? *Порты коммутатора, которые имеют кратчайший путь к корневому коммутатору.*  

Какие порты на коммутаторе являются назначенными портами? *Назначенный (designated) порт — некорневой порт моста между сегментами сети, принимающий трафик из соответствующего сегмента. Сам мост также называется назначенным. В каждом сегменте сети может быть только один назначенный порт. У корневого коммутатора все порты — назначенные. 

Какой порт отображается в качестве альтернативного и в настоящее время заблокирован? ____________________________
Почему протокол spanning-tree выбрал этот порт в качестве невыделенного (заблокированного) порта?
_______________________________________________________________________________________
_______________________________________________________________________________________
_______________________________________________________________________________________
_______________________________________________________________________________________























